"use strict";(self.webpackChunk_microsoft_fast_site=self.webpackChunk_microsoft_fast_site||[]).push([[49651],{33184:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>d,frontMatter:()=>r,metadata:()=>i,toc:()=>l});var s=n(31085),a=n(71184);const r={id:"react",title:"React",sidebar_label:"React",custom_edit_url:"https://github.com/microsoft/fast/edit/main/sites/website/versioned_docs/version-legacy/integrations/react.md",description:"FAST can be used in React applications. Let's take a look at how you can set up a project, starting from scratch.",keywords:["react"]},o=void 0,i={id:"integrations/react",title:"React",description:"FAST can be used in React applications. Let's take a look at how you can set up a project, starting from scratch.",source:"@site/versioned_docs/version-1.x/integrations/react.md",sourceDirName:"integrations",slug:"/integrations/react",permalink:"/docs/1.x/integrations/react",draft:!1,unlisted:!1,editUrl:"https://github.com/microsoft/fast/edit/main/sites/website/versioned_docs/version-legacy/integrations/react.md",tags:[],version:"1.x",frontMatter:{id:"react",title:"React",sidebar_label:"React",custom_edit_url:"https://github.com/microsoft/fast/edit/main/sites/website/versioned_docs/version-legacy/integrations/react.md",description:"FAST can be used in React applications. Let's take a look at how you can set up a project, starting from scratch.",keywords:["react"]},sidebar:"docs",previous:{title:"Ember",permalink:"/docs/1.x/integrations/ember"},next:{title:"Rollup",permalink:"/docs/1.x/integrations/rollup"}},c={},l=[{value:"Setting up the React project",id:"setting-up-the-react-project",level:2},{value:"Configuring packages",id:"configuring-packages",level:2},{value:"Configure create-react-app",id:"configure-create-react-app",level:2},{value:"Using the components",id:"using-the-components",level:2},{value:"Using the React Wrapper",id:"using-the-react-wrapper",level:2},{value:"Wrapping Design System Components",id:"wrapping-design-system-components",level:3},{value:"Wrapping FAST Components",id:"wrapping-fast-components",level:3},{value:"Wrapping VanillaJS Web Components",id:"wrapping-vanillajs-web-components",level:3},{value:"Configuring Custom Events",id:"configuring-custom-events",level:3},{value:"Additional Notes",id:"additional-notes",level:2},{value:"create-react-app",id:"create-react-app",level:3},{value:"Configure ejected create-react-app",id:"configure-ejected-create-react-app",level:3},{value:"Configure babel-loader options",id:"configure-babel-loader-options",level:4},{value:"Working without the fast-react-wrapper",id:"working-without-the-fast-react-wrapper",level:3},{value:"HTML Attributes",id:"html-attributes",level:4},{value:"Custom events",id:"custom-events",level:4},{value:"Interop layers: @skatejs/val and reactify-wc",id:"interop-layers-skatejsval-and-reactify-wc",level:4},{value:"TypeScript and TSX support",id:"typescript-and-tsx-support",level:4}];function p(e){const t={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.p,{children:"FAST can be used in React applications. Let's take a look at how you can set up a project, starting from scratch."}),"\n",(0,s.jsx)(t.h2,{id:"setting-up-the-react-project",children:"Setting up the React project"}),"\n",(0,s.jsxs)(t.p,{children:["First, you'll need to make sure that you have Node.js >= 8.2 and npm >= 5.6 installed. You can learn more and download that ",(0,s.jsx)(t.a,{href:"https://nodejs.org/",children:"on the official site"}),"."]}),"\n",(0,s.jsxs)(t.p,{children:["With Node.js installed, you can use ",(0,s.jsx)(t.a,{href:"https://reactjs.org/docs/create-a-new-react-app.html#create-react-app",children:"create-react-app"})," to create a new React project."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-shell",children:"npx create-react-app fast-app\n"})}),"\n",(0,s.jsx)(t.h2,{id:"configuring-packages",children:"Configuring packages"}),"\n",(0,s.jsx)(t.p,{children:"Next, we'll install the FAST packages, along with supporting libraries. To do that, run this command from your new project folder:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-shell",children:"npm install --save @microsoft/fast-components @microsoft/fast-foundation @microsoft/fast-element @microsoft/fast-react-wrapper\n"})}),"\n",(0,s.jsx)(t.h2,{id:"configure-create-react-app",children:"Configure create-react-app"}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.a,{href:"https://reactjs.org/docs/create-a-new-react-app.html#create-react-app",children:"create-react-app"})," ships with an ",(0,s.jsx)(t.a,{href:"https://eslint.org/",children:"eslint"})," rule that makes working with FAST components difficult. There are two changes that will need to be made in the ",(0,s.jsx)(t.code,{children:"package.json"}),":"]}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"Set the EXTEND_ESLINT environment variable in start, build, and test scripts"})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-jsonc",children:'{\n    //...\n    "scripts": {\n        "start": "EXTEND_ESLINT=true react-scripts start",\n        "build": "EXTEND_ESLINT=true react-scripts build",\n        "test": "EXTEND_ESLINT=true react-scripts test",\n    }\n    // ...\n}\n'})}),"\n",(0,s.jsx)(t.admonition,{type:"note",children:(0,s.jsxs)(t.p,{children:["The above will not work on Windows. You can adjust the scripts to use ",(0,s.jsx)(t.a,{href:"https://www.npmjs.com/package/cross-env",children:"cross-env"})," to add Windows support."]})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsxs)(t.strong,{children:["Override the ",(0,s.jsx)(t.code,{children:"eslintConfig"})," field to turn off the 'no-unused-expressions' rule"]})}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-jsonc",children:'{\n    //..\n    "eslintConfig": {\n        "extends": "react-app",\n        "rules": {\n            "no-unused-expressions": "off"\n        }\n    },\n    //..\n}\n'})}),"\n",(0,s.jsxs)(t.p,{children:["See ",(0,s.jsx)(t.a,{href:"https://create-react-app.dev/docs/setting-up-your-editor#experimental-extending-the-eslint-config",children:"configuring eslint"})," for more information."]}),"\n",(0,s.jsx)(t.h2,{id:"using-the-components",children:"Using the components"}),"\n",(0,s.jsxs)(t.p,{children:["With all the basic pieces in place, let's run our app in dev mode with ",(0,s.jsx)(t.code,{children:"npm start"}),". Right now, it displays the React logo and some editing instructions, since we haven't added any code or interesting HTML. Let's change that."]}),"\n",(0,s.jsxs)(t.p,{children:["First, open your ",(0,s.jsx)(t.code,{children:"src/app.js"})," file and add the following code:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-js",children:"import { \n    provideFASTDesignSystem, \n    fastCard, \n    fastButton\n} from '@microsoft/fast-components';\nimport { provideReactWrapper } from '@microsoft/fast-react-wrapper';\nimport React from 'react';\n\nconst { wrap } = provideReactWrapper(\n    React, \n    provideFASTDesignSystem()\n);\n\nexport const FastCard = wrap(fastCard());\nexport const FastButton = wrap(fastButton())\n"})}),"\n",(0,s.jsxs)(t.p,{children:["This code uses the FAST Design System to register the ",(0,s.jsx)(t.code,{children:"<fast-card>"})," and ",(0,s.jsx)(t.code,{children:"<fast-button>"})," components while automatically wrapping them into React components. Once you save, the dev server will rebuild and refresh your browser. However, you still won't see anything. To get some UI showing up, we need to write some HTML that uses our components. Replace the App component in your ",(0,s.jsx)(t.code,{children:"src/app.js"})," file with the following:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-jsx",children:'function App() {\n    return (\n      <FastCard>\n          <h2>FAST React</h2>\n          <FastButton appearance="accent" onClick={() => console.log("clicked")}>Click Me</FastButton>\n      </FastCard>\n    );\n}\n'})}),"\n",(0,s.jsxs)(t.p,{children:["To add a splash of style, add the following to the ",(0,s.jsx)(t.code,{children:"src/App.css"}),":"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-css",children:"fast-card {\n  padding: 16px;\n  display: flex;\n  flex-direction: column;\n}\n\nh2 {\n  font-size: var(--type-ramp-plus-5-font-size);\n  line-height: var(--type-ramp-plus-5-line-height);\n}\n\nfast-card > fast-button {\n  align-self: flex-end;\n}\n"})}),"\n",(0,s.jsx)(t.p,{children:"Congratulations! You're now set up to use FAST and React!"}),"\n",(0,s.jsx)(t.h2,{id:"using-the-react-wrapper",children:"Using the React Wrapper"}),"\n",(0,s.jsxs)(t.p,{children:["Above, we leveraged the ",(0,s.jsx)(t.code,{children:"@microsoft/fast-react-wrapper"})," library to enable seamless integration of FAST Components. There are a few additional ways to use this API for different web component scenarios."]}),"\n",(0,s.jsx)(t.h3,{id:"wrapping-design-system-components",children:"Wrapping Design System Components"}),"\n",(0,s.jsxs)(t.p,{children:["Previously, you've seen that we can wrap a Design System component by passing its registration function to the ",(0,s.jsx)(t.code,{children:"wrap"})," method as follows:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:"const { wrap } = provideReactWrapper(\n    React, \n    provideFASTDesignSystem()\n);\n\nexport const FastButton = wrap(fastButton())\n"})}),"\n",(0,s.jsxs)(t.p,{children:["This code creates a wrapper that is configured with a React-compatible API and a Design System instance. When passing a Design System as the second parameter, you can then pass component registration functions to the ",(0,s.jsx)(t.code,{children:"wrap"})," helper. The helper will both register the web component with the Design System and wrap it in a type-safe React component, all with a single call."]}),"\n",(0,s.jsx)(t.p,{children:"Alternatively, you can skip providing the Design System to the wrapper, and use the generated registry to manually register all previously wrapped components."}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:"const { wrap, registry } = provideReactWrapper(React);\n\nexport const FastButton = wrap(fastButton())\n\nprovideFASTDesignSystem()\n    .register(registry)\n"})}),"\n",(0,s.jsx)(t.p,{children:"The final option is to handle everything by hand:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:"const { wrap } = provideReactWrapper(React);\n\nexport const FastButton = wrap(fastButton())\n\nprovideFASTDesignSystem()\n    .register(\n        fastButton()\n    );\n"})}),"\n",(0,s.jsx)(t.h3,{id:"wrapping-fast-components",children:"Wrapping FAST Components"}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"wrap"})," helper can also wrap any FAST Web Component defined using the ",(0,s.jsx)(t.code,{children:"@customElement"})," decorator or by manually calling ",(0,s.jsx)(t.code,{children:"FASTElement.define"}),". To do so, pass the custom element class to the wrapper."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:"import { FASTElement, customElement, html } from '@microsoft/fast-element';\n\n@customElement({\n  name: 'my-component',\n  template: html`...`,\n  styles:...\n})\nclass _MyComponent extends FASTElement {\n\n}\n\nexport const MyComponent = provideReactWrapper(React).wrap(_MyComponent);\n"})}),"\n",(0,s.jsx)(t.admonition,{type:"note",children:(0,s.jsxs)(t.p,{children:["When using decorators in a create-react-app setup, you will most likely get this error ",(0,s.jsx)(t.code,{children:"Support for the experimental syntax 'decorators-legacy' isn't currently enabled"}),'. See the "Additional Notes" below for options to add support for decorators.']})}),"\n",(0,s.jsx)(t.h3,{id:"wrapping-vanillajs-web-components",children:"Wrapping VanillaJS Web Components"}),"\n",(0,s.jsxs)(t.p,{children:["If you have a component from a 3rd party library, not written with FAST, or a VanillaJS Web Component, you can wrap that as well. In this scenario, you will have to provide some additional information, such as the element name and the list of properties that should be handled by the wrapper rather than React. Components created with libraries like ",(0,s.jsx)(t.code,{children:"Lit"})," require the element name to be configured but not the properties, while some other libraries or hand-written components may also require the property list. This depends on how the component was defined. Below is an example of configuring both the name and the property list."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:"import { CoolComponent as _CoolComponent } from '@cool/component';\n\nconst { wrap } = provideReactWrapper(React);\n\nexport const CoolComponent = wrap(\n  _CoolComponent,\n  {\n    name: 'cool-component',\n    properties: [\n      'list',\n      'properties',\n      'here'\n    ]\n  }\n);\n"})}),"\n",(0,s.jsx)(t.h3,{id:"configuring-custom-events",children:"Configuring Custom Events"}),"\n",(0,s.jsxs)(t.p,{children:["If the wrapped component uses custom events that you intend to use from React, you will need to manually configure a mapping from React event name to the native event name. Here's an example of what that would look like if you wanted to leverage the FAST MenuItem's ",(0,s.jsx)(t.code,{children:"expanded-change"})," event:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:"const { wrap } = provideReactWrapper(\n    React, \n    provideFASTDesignSystem()\n);\n\nexport const FastMenuItem = wrap(\n    fastMenuItem(),\n    {\n      events: {\n        onExpandedChange: 'expanded-change'\n      }\n    }\n)\n"})}),"\n",(0,s.jsx)(t.h2,{id:"additional-notes",children:"Additional Notes"}),"\n",(0,s.jsx)(t.h3,{id:"create-react-app",children:"create-react-app"}),"\n",(0,s.jsxs)(t.p,{children:["FAST makes use of decorators to define components. At this time, ",(0,s.jsx)(t.code,{children:"create-react-app"})," ",(0,s.jsx)(t.a,{href:"https://create-react-app.dev/docs/can-i-use-decorators/",children:"does not support decorators"}),". This won't be a problem when using components ",(0,s.jsx)(t.em,{children:"imported"})," from FAST because they have already been transpiled by TypeScript - but to ",(0,s.jsx)(t.em,{children:"create"})," components in a ",(0,s.jsx)(t.code,{children:"create-react-app"})," application you'll need to do one of the following:"]}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:(0,s.jsx)(t.a,{href:"/docs/1.x/fast-element/defining-elements#working-without-decorators",children:"Define components without decorators"})}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.a,{href:"https://create-react-app.dev/docs/available-scripts#npm-run-eject",children:"Eject"}),(0,s.jsx)(t.code,{children:"create-react-app"})," and change Babel to support decorators"]}),"\n",(0,s.jsxs)(t.li,{children:["Use an intermediary like ",(0,s.jsx)(t.a,{href:"https://www.npmjs.com/package/react-app-rewired",children:"react-app-rewired"})]}),"\n"]}),"\n",(0,s.jsxs)(t.p,{children:["You can read more about decorator configuration issues ",(0,s.jsx)(t.a,{href:"https://github.com/microsoft/fast/issues/4503",children:"here."})]}),"\n",(0,s.jsx)(t.h3,{id:"configure-ejected-create-react-app",children:"Configure ejected create-react-app"}),"\n",(0,s.jsx)(t.p,{children:"Eject create-react-app:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-shell",children:"npm run eject\n"})}),"\n",(0,s.jsx)(t.p,{children:"Install babel plugins:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-shell",children:"npm i --save-dev @babel/plugin-proposal-decorators @babel/preset-env\n"})}),"\n",(0,s.jsx)(t.h4,{id:"configure-babel-loader-options",children:"Configure babel-loader options"}),"\n",(0,s.jsxs)(t.p,{children:["Go to the ",(0,s.jsx)(t.code,{children:"webpack.config.js"})," file under the ",(0,s.jsx)(t.code,{children:"config"})," folder and find where ",(0,s.jsx)(t.code,{children:"babel-loader"})," is (around line 407)."]}),"\n",(0,s.jsxs)(t.p,{children:["Add ",(0,s.jsx)(t.code,{children:"@babel/preset-env"})," to presets. This allows you to use the latest JavaScript features.\nTargeting specific browser versions prevents Babel from transpiling too much to support old JavaScript versions, increasing file size."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-js",children:'presets: [\n  ["@babel/preset-env", {\n    "targets": {\n      "browsers": ["last 2 versions", "safari >= 7"]\n    }\n  }],\n  ...\n'})}),"\n",(0,s.jsxs)(t.p,{children:["Add ",(0,s.jsx)(t.code,{children:"@babel/plugin-proposal-decorators"})," to support decorators."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-js",children:'plugins: [\n  ["@babel/plugin-proposal-decorators", { "legacy": true }],\n  ...\n'})}),"\n",(0,s.jsx)(t.h3,{id:"working-without-the-fast-react-wrapper",children:"Working without the fast-react-wrapper"}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"@microsoft/fast-react-wrapper"})," library described above addresses all the challenges involved in using Web Components from React. We strongly recommend using this library for integration. However, if you cannot use this library or want to explore other options, below you'll find information on alternative approaches."]}),"\n",(0,s.jsx)(t.h4,{id:"html-attributes",children:"HTML Attributes"}),"\n",(0,s.jsxs)(t.p,{children:["React is capable of rendering custom HTML elements and binding data to them, but it is beneficial to understand ",(0,s.jsx)(t.em,{children:"how"})," React does this. React will apply all ",(0,s.jsx)(t.em,{children:"props"})," to a custom HTML element as ",(0,s.jsx)(t.em,{children:"HTML attributes"})," - including non-primitive types such as arrays and objects. Where some UI libraries provide binding syntaxes to distinguish setting properties, attributes, and events, React does not. This means that it can be very easy to end up with ",(0,s.jsx)(t.code,{children:'my-prop="[object Object]"'})," in your HTML. React is exploring solutions ",(0,s.jsx)(t.a,{href:"https://github.com/facebook/react/issues/11347",children:"in this issue"}),". See the section on ",(0,s.jsx)(t.a,{href:"#interop-layers-skatejsval-and-reactify-wc",children:"interop layers"})," for a work-around for this issue."]}),"\n",(0,s.jsx)(t.h4,{id:"custom-events",children:"Custom events"}),"\n",(0,s.jsxs)(t.p,{children:["React's synthetic eventing system comes with an unfortunate side-effect of being incapable of declaratively applying ",(0,s.jsx)(t.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent",children:(0,s.jsx)(t.code,{children:"CustomEvent"})})," listeners. ",(0,s.jsx)(t.a,{href:"#interop-layers-skatejsval-and-reactify-wc",children:"interop layers"})," can be used to address this issue. Alternatively, a ",(0,s.jsx)(t.code,{children:"ref"})," can be used on the custom element to imperatively apply the event listener to the HTML element directly."]}),"\n",(0,s.jsx)(t.h4,{id:"interop-layers-skatejsval-and-reactify-wc",children:"Interop layers: @skatejs/val and reactify-wc"}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.a,{href:"https://github.com/skatejs/val",children:"@skatejs/val"})," is a small library that wraps React's ",(0,s.jsx)(t.code,{children:"createElement"})," function and provides the ability direct React ",(0,s.jsx)(t.em,{children:"props"})," explicitly to HTML attributes, DOM properties, or to declarative event listeners."]}),"\n",(0,s.jsxs)(t.p,{children:["Another good option is ",(0,s.jsx)(t.a,{href:"https://github.com/BBKolton/reactify-wc",children:"reactify-wc"}),". It provides similar capabilities as ",(0,s.jsx)(t.code,{children:"@skatejs/val"})," but does so by creating component wrappers."]}),"\n",(0,s.jsx)(t.h4,{id:"typescript-and-tsx-support",children:"TypeScript and TSX support"}),"\n",(0,s.jsxs)(t.p,{children:["If you're using TypeScript, you'll need to augment the ",(0,s.jsx)(t.code,{children:"JSX.IntrinsicElements"})," interface to use custom elements in TSX. To do so, create a ",(0,s.jsx)(t.code,{children:"custom-elements.d.ts"})," file in your source directory and add the following:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-ts",children:'// custom-elements.d.ts\ndeclare namespace JSX {\n    interface IntrinsicElements {\n        /**\n         *  React.DetailedHTMLProps<React.HTMLAttributes<HTMLElement>, HTMLElement> allows setting standard HTML attributes on the element\n         */\n        "my-element": React.DetailedHTMLProps<React.HTMLAttributes<HTMLElement>, HTMLElement> & {\n            "my-attribute-name": string;\n        };\n    }\n}\n'})})]})}function d(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(p,{...e})}):p(e)}},71184:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>i});var s=n(14041);const a={},r=s.createContext(a);function o(e){const t=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),s.createElement(r.Provider,{value:t},e.children)}}}]);