"use strict";(self.webpackChunk_microsoft_fast_site=self.webpackChunk_microsoft_fast_site||[]).push([[39755],{76485:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>a,contentTitle:()=>r,default:()=>h,frontMatter:()=>o,metadata:()=>l,toc:()=>c});var i=n(31085),s=n(71184);const o={id:"defining-elements",title:"Defining Elements",sidebar_label:"Defining Elements",custom_edit_url:"https://github.com/microsoft/fast/edit/main/sites/website/versioned_docs/version-legacy/fast-element/defining-elements.md",description:"To define a custom element, begin by creating a class that extends FASTElement and decorate it with the @customElement decorator, providing the element name.",keywords:["defining elements"]},r=void 0,l={id:"fast-element/defining-elements",title:"Defining Elements",description:"To define a custom element, begin by creating a class that extends FASTElement and decorate it with the @customElement decorator, providing the element name.",source:"@site/versioned_docs/version-1.x/fast-element/defining-elements.md",sourceDirName:"fast-element",slug:"/fast-element/defining-elements",permalink:"/docs/1.x/fast-element/defining-elements",draft:!1,unlisted:!1,editUrl:"https://github.com/microsoft/fast/edit/main/sites/website/versioned_docs/version-legacy/fast-element/defining-elements.md",tags:[],version:"1.x",frontMatter:{id:"defining-elements",title:"Defining Elements",sidebar_label:"Defining Elements",custom_edit_url:"https://github.com/microsoft/fast/edit/main/sites/website/versioned_docs/version-legacy/fast-element/defining-elements.md",description:"To define a custom element, begin by creating a class that extends FASTElement and decorate it with the @customElement decorator, providing the element name.",keywords:["defining elements"]},sidebar:"docs",previous:{title:"Getting Started",permalink:"/docs/1.x/fast-element/getting-started"},next:{title:"Declaring Templates",permalink:"/docs/1.x/fast-element/declaring-templates"}},a={},c=[{value:"Basic elements",id:"basic-elements",level:2},{value:"Customizing attributes",id:"customizing-attributes",level:2},{value:"The element lifecycle",id:"the-element-lifecycle",level:2},{value:"Working without decorators",id:"working-without-decorators",level:2}];function d(e){const t={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.h2,{id:"basic-elements",children:"Basic elements"}),"\n",(0,i.jsxs)(t.p,{children:["To define a custom element, begin by creating a class that extends ",(0,i.jsx)(t.code,{children:"FASTElement"})," and decorate it with the ",(0,i.jsx)(t.code,{children:"@customElement"})," decorator, providing the element name."]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsxs)(t.strong,{children:["Example: A Basic ",(0,i.jsx)(t.code,{children:"FASTElement"})," Definition"]})}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-ts",children:"import { FASTElement, customElement } from '@microsoft/fast-element';\n\n@customElement('name-tag')\nexport class NameTag extends FASTElement {\n\n}\n"})}),"\n",(0,i.jsxs)(t.p,{children:["With this in place, you can now use your ",(0,i.jsx)(t.code,{children:"name-tag"})," element anywhere in HTML with the following markup:"]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.strong,{children:"Example: Using a Web Component"})}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-html",children:"<name-tag></name-tag>\n"})}),"\n",(0,i.jsx)(t.admonition,{type:"important",children:(0,i.jsxs)(t.p,{children:["Web Component names must contain a ",(0,i.jsx)(t.code,{children:"-"})," in order to prevent future conflicts with built-in elements and to namespace components from different libraries. For more information on the basics of Web Components ",(0,i.jsx)(t.a,{href:"https://developers.google.com/web/fundamentals/web-components",children:"see this set of articles"}),"."]})}),"\n",(0,i.jsx)(t.admonition,{type:"note",children:(0,i.jsxs)(t.p,{children:['HTML has a few special tags known as "self-closing tags". Common examples include ',(0,i.jsx)(t.code,{children:"<input>"})," and ",(0,i.jsx)(t.code,{children:"<img>"}),". However, most HTML elements and ",(0,i.jsx)(t.strong,{children:"all"})," web components must have an explicit closing tag."]})}),"\n",(0,i.jsx)(t.p,{children:"We've got a basic Web Component in place, but it doesn't do much. So, let's add an attribute and make it render something."}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsxs)(t.strong,{children:["Example: Adding Attributes to a ",(0,i.jsx)(t.code,{children:"FASTElement"})]})}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-ts",children:"import { FASTElement, customElement, attr } from '@microsoft/fast-element';\n\n@customElement('name-tag')\nexport class NameTag extends FASTElement {\n  @attr greeting: string = 'Hello';\n\n  // optional method \n  greetingChanged() {\n    ...\n  }\n}\n"})}),"\n",(0,i.jsxs)(t.p,{children:["To add attributes to your HTML element, create properties decorated by the ",(0,i.jsx)(t.code,{children:"@attr"})," decorator. All attributes defined this way will be automatically registered with the platform so that they can be updated through the browser's native ",(0,i.jsx)(t.code,{children:"setAttribute"})," API as well as the property. You can optionally add a method with the naming convention ",(0,i.jsx)(t.em,{children:"propertyName"}),"Changed to your class (e.g. ",(0,i.jsx)(t.code,{children:"greeting"})," and ",(0,i.jsx)(t.code,{children:"greetingChanged()"}),"), and this method will be called whenever your property changes, whether it changes through the property or the attribute API."]}),"\n",(0,i.jsx)(t.admonition,{type:"note",children:(0,i.jsxs)(t.p,{children:["All properties decorated with ",(0,i.jsx)(t.code,{children:"@attr"})," are also ",(0,i.jsx)(t.em,{children:"observable"}),". See ",(0,i.jsx)(t.a,{href:"/docs/1.x/fast-element/observables-and-state",children:"observables and state"})," for information about how observables enable efficient rendering."]})}),"\n",(0,i.jsxs)(t.p,{children:["By default, anything extending from ",(0,i.jsx)(t.code,{children:"FASTElement"})," will automatically have a ",(0,i.jsx)(t.code,{children:"ShadowRoot"})," attached in order to enable encapsulated rendering."]}),"\n",(0,i.jsxs)(t.p,{children:["To see it in action, you can use the same HTML as above, or change the default ",(0,i.jsx)(t.code,{children:"greeting"})," with the following:"]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.strong,{children:"Example: Using a Web Component with Attributes"})}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-html",children:'<name-tag greeting="Hola"></name-tag>\n'})}),"\n",(0,i.jsx)(t.h2,{id:"customizing-attributes",children:"Customizing attributes"}),"\n",(0,i.jsxs)(t.p,{children:["By default, any attribute created with ",(0,i.jsx)(t.code,{children:"@attr"})," will perform no explicit type coercion other than when it reflects its value to the HTML DOM via the ",(0,i.jsx)(t.code,{children:"setAttribute"})," API. However, you can convert DOM attribute string values to and from arbitrary types as well as control the ",(0,i.jsx)(t.code,{children:"mode"})," that is used to reflect property values to the DOM. There are three modes available through the ",(0,i.jsx)(t.code,{children:"mode"})," property of the attribute configuration:"]}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"reflect"})," - The ",(0,i.jsx)(t.em,{children:"default"})," mode that is used if none is specified. This reflects property changes to the DOM. If a ",(0,i.jsx)(t.code,{children:"converter"})," is supplied, it will invoke the converter before calling the ",(0,i.jsx)(t.code,{children:"setAttribute"})," DOM API."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"boolean"})," - This mode causes your attribute to function using the HTML boolean attribute behavior. When your attribute is present in the DOM or equal to its own name, the value will be true. When the attribute is absent from the DOM, the value of the property will be false. Setting the property will also update the DOM by adding/removing the attribute."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"fromView"})," - This mode skips reflecting the value of the property back to the HTML attribute, but does receive updates when changed through ",(0,i.jsx)(t.code,{children:"setAttribute"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(t.p,{children:["In addition to setting the ",(0,i.jsx)(t.code,{children:"mode"}),", you can also supply a custom ",(0,i.jsx)(t.code,{children:"ValueConverter"})," by setting the ",(0,i.jsx)(t.code,{children:"converter"})," property of the attribute configuration. The converter must implement the following interface:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-ts",children:"interface ValueConverter {\n    toView(value: any): string;\n    fromView(value: string): any;\n}\n"})}),"\n",(0,i.jsx)(t.p,{children:"Here's how it works:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["When the DOM attribute value changes, the converter's ",(0,i.jsx)(t.code,{children:"fromView"})," method will be called, allowing custom code to coerce the value to the proper type expected by the property."]}),"\n",(0,i.jsxs)(t.li,{children:["When the property value changes, the converter's ",(0,i.jsx)(t.code,{children:"fromView"})," method will also be called, ensuring that the type is correct. After this, the ",(0,i.jsx)(t.code,{children:"mode"})," will be determined. If the mode is set to ",(0,i.jsx)(t.code,{children:"reflect"})," then the converter's ",(0,i.jsx)(t.code,{children:"toView"})," method will be called to allow the type to be formatted before writing to the attribute using ",(0,i.jsx)(t.code,{children:"setAttribute"}),"."]}),"\n"]}),"\n",(0,i.jsx)(t.admonition,{type:"important",children:(0,i.jsxs)(t.p,{children:["When the ",(0,i.jsx)(t.code,{children:"mode"})," is set to ",(0,i.jsx)(t.code,{children:"boolean"}),", a built-in ",(0,i.jsx)(t.code,{children:"booleanConverter"})," is automatically used to ensure type correctness so that the manual configuration of the converter is not needed in this common scenario."]})}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.strong,{children:"Example: An Attribute in Reflect Mode with No Special Conversion"})}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-ts",children:"import { FASTElement, customElement, attr } from '@microsoft/fast-element';\n\n@customElement('name-tag')\nexport class NameTag extends FASTElement {\n  @attr greeting: string = 'Hello';\n}\n"})}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.strong,{children:"Example: An Attribute in Boolean Mode with Boolean Conversion"})}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-ts",children:"import { FASTElement, customElement, attr } from '@microsoft/fast-element';\n\n@customElement('my-checkbox')\nexport class MyCheckbox extends FASTElement {\n  @attr({ mode: 'boolean' }) disabled: boolean = false;\n}\n"})}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.strong,{children:"Example: An Attribute in Reflect Mode with Custom Conversion"})}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-ts",children:"import { FASTElement, customElement, attr, ValueConverter } from '@microsoft/fast-element';\n\nconst numberConverter: ValueConverter = {\n  toView(value: any): string {\n    // convert numbers to strings\n  },\n\n  fromView(value: string): any {\n    // convert strings to numbers\n  }\n};\n\n@customElement('my-counter')\nexport class MyCounter extends FASTElement {\n  @attr({ converter: numberConverter }) count: number = 0;\n}\n"})}),"\n",(0,i.jsx)(t.h2,{id:"the-element-lifecycle",children:"The element lifecycle"}),"\n",(0,i.jsxs)(t.p,{children:["All Web Components support a series of lifecycle events that you can tap into to execute custom code at specific points in time. ",(0,i.jsx)(t.code,{children:"FASTElement"})," implements several of these callbacks automatically in order to enable features of its templating engine (described in ",(0,i.jsx)(t.a,{href:"/docs/1.x/fast-element/declaring-templates",children:"declaring templates"}),"). However, you can override them to provide your own code. Here's an example of how you would execute custom code when your element is inserted into the DOM."]}),"\n",(0,i.jsx)(t.p,{children:(0,i.jsx)(t.strong,{children:"Example: Tapping into the Custom Element Lifecycle"})}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-ts",children:"import { FASTElement, customElement, attr } from '@microsoft/fast-element';\n\n@customElement('name-tag')\nexport class NameTag extends FASTElement {\n  @attr greeting: string = 'Hello';\n\n  greetingChanged() {\n    this.shadowRoot!.innerHTML = this.greeting;\n  }\n\n  connectedCallback() {\n    super.connectedCallback();\n    console.log('name-tag is now connected to the DOM');\n  }\n}\n"})}),"\n",(0,i.jsx)(t.p,{children:"The full list of available lifecycle callbacks is:"}),"\n",(0,i.jsxs)(t.table,{children:[(0,i.jsx)(t.thead,{children:(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.th,{children:"Callback"}),(0,i.jsx)(t.th,{children:"Description"})]})}),(0,i.jsxs)(t.tbody,{children:[(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"constructor"}),(0,i.jsxs)(t.td,{children:["Runs when the element is created or upgraded. ",(0,i.jsx)(t.code,{children:"FASTElement"})," will attach the shadow DOM at this time."]})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"connectedCallback"}),(0,i.jsxs)(t.td,{children:["Runs when the element is inserted into the DOM. On first connect, ",(0,i.jsx)(t.code,{children:"FASTElement"})," hydrates the HTML template, connects template bindings, and adds the styles."]})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"disconnectedCallback"}),(0,i.jsxs)(t.td,{children:["Runs when the element is removed from the DOM. ",(0,i.jsx)(t.code,{children:"FASTElement"})," will remove template bindings and clean up resources at this time."]})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"attributeChangedCallback(attrName, oldVal, newVal)"}),(0,i.jsxs)(t.td,{children:["Runs any time one of the element's custom attributes changes. ",(0,i.jsx)(t.code,{children:"FASTElement"})," uses this to sync the attribute with its property. When the property updates, a render update is also queued, if there was a template dependency."]})]}),(0,i.jsxs)(t.tr,{children:[(0,i.jsx)(t.td,{children:"adoptedCallback"}),(0,i.jsxs)(t.td,{children:["Runs if the element was moved from its current ",(0,i.jsx)(t.code,{children:"document"})," into a new ",(0,i.jsx)(t.code,{children:"document"})," via a call to the ",(0,i.jsx)(t.code,{children:"adoptNode(...)"})," API."]})]})]})]}),"\n",(0,i.jsx)(t.h2,{id:"working-without-decorators",children:"Working without decorators"}),"\n",(0,i.jsx)(t.p,{children:"The examples above and those throughout our documentation leverage TypeScript, and in particular, the decorators feature of the language. Decorators are an upcoming feature planned for a future version of JavaScript, but their design is not yet finished. While the syntax for decorator usage is not likely to change in the final version of the feature, some of our community members may feel uncomfortable using this feature at this stage. Additionally, since decorators are transpiled into code that uses helper functions (both in TypeScript and Babel) the compiled output will be larger than the equivalent non-decorator code."}),"\n",(0,i.jsxs)(t.p,{children:["While there are size implications of using decorators prior to full language support, they do present the most declarative and readable form of the API, and we recommend their use for the average project. To strike a balance between declarative readability and size, we recommend that TypeScript be used in combination with the ",(0,i.jsx)(t.code,{children:'"importHelpers": true'})," compiler option. When this option is set, instead of generating helper functions for decorators into every file, TypeScript will import a set of shared helpers published in the ",(0,i.jsx)(t.code,{children:"tslib"})," package."]}),"\n",(0,i.jsxs)(t.p,{children:["For those that require the smallest possible builds, FAST Elements can be completely defined in Vanilla JS, without using decorators, by leveraging a static ",(0,i.jsx)(t.code,{children:"definition"})," field on your class. The ",(0,i.jsx)(t.code,{children:"definition"})," field only needs to present the same configuration as the ",(0,i.jsx)(t.code,{children:"@customElement"})," decorator. Here's an example that shows the use of the ",(0,i.jsx)(t.code,{children:"definition"})," field along with a manual call to ",(0,i.jsx)(t.code,{children:"define"})," the element:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-js",children:"import { FASTElement, html, css } from '@microsoft/fast-element';\n\nconst template = html`...`;\nconst styles = css`...`;\nconst converter = { ... };\n\nexport class MyElement extends FASTElement {\n  static definition = {\n    name: 'my-element',\n    template,\n    styles,\n    attributes: [\n      'value', // same attr/prop\n      { attribute: 'some-attr', property: 'someAttr' }, // different attr/prop\n      { property: 'count', converter } // derive attr; add converter\n    ]\n  };\n\n  value = '';\n  someAttr = '';\n  count = 0;\n}\n\nFASTElement.define(MyElement);\n"})}),"\n",(0,i.jsx)(t.admonition,{type:"note",children:(0,i.jsxs)(t.p,{children:["The ",(0,i.jsx)(t.code,{children:"definition"})," can also be separated from the class and passed into the ",(0,i.jsx)(t.code,{children:"define"})," call directly if desired. Here's what that would look like: ",(0,i.jsx)(t.code,{children:"FASTElement.define(MyElement, myDefinition);"})]})})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},71184:(e,t,n)=>{n.d(t,{R:()=>r,x:()=>l});var i=n(14041);const s={},o=i.createContext(s);function r(e){const t=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),i.createElement(o.Provider,{value:t},e.children)}}}]);