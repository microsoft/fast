<!doctype html>
<html lang="en" data-theme="dark">
  <head>
    <meta charset="UTF-8">
    <title>Dependency Injection</title>
    <meta data-rh="true" name="twitter:card" content="summary_large_image">
    <meta data-rh="true" property="og:url" content="https://www.fast.design/">
    <meta data-rh="true" property="og:locale" content="en">
    <meta data-rh="true" name="docsearch:language" content="en">
    <meta data-rh="true" property="og:title" content="web components | FAST">
    <meta data-rh="true" name="description" content="FAST web components">
    <meta data-rh="true" property="og:description" content="FAST web components">
    <link data-rh="true" rel="icon" href="/static/favicon.ico">
    <link data-rh="true" rel="canonical" href="https://www.fast.design/">
    <link data-rh="true" rel="alternate" href="https://www.fast.design/" hreflang="en">
    <link data-rh="true" rel="alternate" href="https://www.fast.design/" hreflang="x-default">
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/prism-vsc-dark-plus.css">
    <link rel="stylesheet" href="/css/variables.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" data-rh="true">
    <script src="/js/navbar-toggle.js"></script>
    </head>
  <body class="">
    <nav aria-label="Main" class="navbar navbar--fixed-top">
        <div class="navbar__inner">
            <div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true">
                        <path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path>
                    </svg></button><a href="https://www.fast.design" target="_self" rel="noopener noreferrer" class="navbar__brand">
                    <div class="navbar__logo"><img src="/static/fast-inline-logo.svg" alt="Line drawing of a small moon orbiting around a planet with the words FAST next to it" class="themed-component themed-component__dark"></div>
                </a><a class="navbar__item navbar__link" href="/docs/2.x/introduction">Docs</a>
                <div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/1.x/introduction">1.x</a>
                    <ul class="dropdown__menu">
                        <li><a class="dropdown__link" href="/docs/2.x/introduction">2.x</a></li>
                        <li><a class="dropdown__link" href="/docs/1.x/introduction">1.x</a></li>
                    </ul>
                </div>
            </div>
            <div class="navbar__items navbar__items--right"><a href="https://www.fast.design" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Home<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="icon-external-link">
                        <path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z">
                        </path>
                    </svg></a><a href="https://discord.com/invite/FcSNfg4" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Community<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="icon-external-link">
                        <path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z">
                        </path>
                    </svg></a><a href="https://github.com/microsoft/fast" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="icon-external-link">
                        <path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z">
                        </path>
                    </svg></a>
            </div>
        </div>
    </nav>
    <div class="main-wrapper">
        <div class="docs-wrapper">
    <div class="doc-root">
        <aside class="theme-doc-sidebar-container sidebar-container">
    <div class="sidebar-viewport">
        <div class="sidebar">
            <nav class="menu thin-scrollbar menu-nav">
                <ul class="menu__list"><li class="menu__list-item menu__list-item-collapsible"><a>Apps and Experiences</a><ul><li class="menu__list-item menu__list-item-collapsible--active"><a href="/docs/1.x/apps-and-experiences/dependency-injection/" aria-current="page" class="menu__link menu__link--active">Dependency Injection</a></li></ul></li>
<li class="menu__list-item menu__list-item-collapsible"><a>Community</a><ul><li class="menu__list-item"><a href="/docs/1.x/community/branch-guide/" class="menu__link">Branch Guide</a></li>
<li class="menu__list-item"><a href="/docs/1.x/community/code-of-conduct/" class="menu__link">Code of Conduct</a></li>
<li class="menu__list-item"><a href="/docs/1.x/community/contributor-guide/" class="menu__link">Contributor Guide</a></li>
<li class="menu__list-item"><a href="/docs/1.x/community/issue-management/" class="menu__link">Issue Management</a></li>
<li class="menu__list-item"><a href="/docs/1.x/community/join/" class="menu__link">Joining the community</a></li>
<li class="menu__list-item"><a href="/docs/1.x/community/release-planning/" class="menu__link">Release Planning</a></li>
<li class="menu__list-item"><a href="/docs/1.x/community/writing-documentation/" class="menu__link">Writing documentation</a></li></ul></li>
<li class="menu__list-item menu__list-item-collapsible"><a>Components</a><ul><li class="menu__list-item"><a href="/docs/1.x/components/getting-started/" class="menu__link">Components QuickStart</a></li></ul></li>
<li class="menu__list-item menu__list-item-collapsible"><a>Design Systems</a><ul><li class="menu__list-item"><a href="/docs/1.x/design-systems/creating-a-component-library/" class="menu__link">Creating a Component Library</a></li>
<li class="menu__list-item"><a href="/docs/1.x/design-systems/design-tokens/" class="menu__link">Design Tokens</a></li>
<li class="menu__list-item"><a href="/docs/1.x/design-systems/fast-frame/" class="menu__link">The FAST Frame Design System</a></li>
<li class="menu__list-item"><a href="/docs/1.x/design-systems/high-contrast/" class="menu__link">High Contrast in FAST</a></li>
<li class="menu__list-item"><a href="/docs/1.x/design-systems/overview/" class="menu__link">What is a Design System?</a></li></ul></li>
<li class="menu__list-item menu__list-item-collapsible"><a>Design</a><ul><li class="menu__list-item"><a href="/docs/1.x/design/localization/" class="menu__link">Localization</a></li>
<li class="menu__list-item"><a href="/docs/1.x/design/match-media-stylesheets/" class="menu__link">MatchMedia Stylesheets</a></li></ul></li>
<li class="menu__list-item menu__list-item-collapsible"><a>FAST Element</a><ul><li class="menu__list-item"><a href="/docs/1.x/fast-element/declaring-templates/" class="menu__link">Declaring Templates</a></li>
<li class="menu__list-item"><a href="/docs/1.x/fast-element/defining-elements/" class="menu__link">Defining Elements</a></li>
<li class="menu__list-item"><a href="/docs/1.x/fast-element/getting-started/" class="menu__link">Getting Started with FAST Element</a></li>
<li class="menu__list-item"><a href="/docs/1.x/fast-element/leveraging-css/" class="menu__link">Leveraging CSS</a></li>
<li class="menu__list-item"><a href="/docs/1.x/fast-element/next-steps/" class="menu__link">Next Steps</a></li>
<li class="menu__list-item"><a href="/docs/1.x/fast-element/observables-and-state/" class="menu__link">Observables and State</a></li>
<li class="menu__list-item"><a href="/docs/1.x/fast-element/using-directives/" class="menu__link">Using Directives</a></li>
<li class="menu__list-item"><a href="/docs/1.x/fast-element/working-with-shadow-dom/" class="menu__link">Working with Shadow DOM</a></li></ul></li>
<li class="menu__list-item menu__list-item-collapsible"><a>Integrations</a><ul><li class="menu__list-item"><a href="/docs/1.x/integrations/angular/" class="menu__link">Angular</a></li>
<li class="menu__list-item"><a href="/docs/1.x/integrations/aspnet/" class="menu__link">ASP.NET</a></li>
<li class="menu__list-item"><a href="/docs/1.x/integrations/aurelia/" class="menu__link">Aurelia</a></li>
<li class="menu__list-item"><a href="/docs/1.x/integrations/blazor/" class="menu__link">Blazor</a></li>
<li class="menu__list-item"><a href="/docs/1.x/integrations/ember/" class="menu__link">Ember</a></li>
<li class="menu__list-item"><a href="/docs/1.x/integrations/introduction/" class="menu__link">Introduction</a></li>
<li class="menu__list-item"><a href="/docs/1.x/integrations/react/" class="menu__link">React</a></li>
<li class="menu__list-item"><a href="/docs/1.x/integrations/rollup/" class="menu__link">Rollup</a></li>
<li class="menu__list-item"><a href="/docs/1.x/integrations/svelte/" class="menu__link">Svelte</a></li>
<li class="menu__list-item"><a href="/docs/1.x/integrations/vite/" class="menu__link">Vite</a></li>
<li class="menu__list-item"><a href="/docs/1.x/integrations/vue/" class="menu__link">Vue</a></li>
<li class="menu__list-item"><a href="/docs/1.x/integrations/webpack/" class="menu__link">Webpack</a></li></ul></li>
<li class="menu__list-item"><a href="/docs/1.x/introduction/" class="menu__link">Introduction</a></li>
<li class="menu__list-item menu__list-item-collapsible"><a>Resources</a><ul><li class="menu__list-item"><a href="/docs/1.x/resources/acknowledgements/" class="menu__link">Acknowledgements</a></li>
<li class="menu__list-item"><a href="/docs/1.x/resources/browser-support/" class="menu__link">Browser Support</a></li>
<li class="menu__list-item"><a href="/docs/1.x/resources/cheat-sheet/" class="menu__link">Cheat Sheet</a></li>
<li class="menu__list-item"><a href="/docs/1.x/resources/faq/" class="menu__link">FAQ</a></li>
<li class="menu__list-item"><a href="/docs/1.x/resources/glossary/" class="menu__link">Glossary</a></li>
<li class="menu__list-item"><a href="/docs/1.x/resources/license/" class="menu__link">License</a></li>
<li class="menu__list-item"><a href="/docs/1.x/resources/security/" class="menu__link">Security</a></li>
<li class="menu__list-item"><a href="/docs/1.x/resources/why-web-components/" class="menu__link">Why Web Components?</a></li></ul></li>
<li class="menu__list-item menu__list-item-collapsible"><a>Tools</a><ul><li class="menu__list-item"><a href="/docs/1.x/tools/component-explorer/" class="menu__link">Component Explorer</a></li>
<li class="menu__list-item"><a href="/docs/1.x/tools/hot-module-reload/" class="menu__link">Hot Module Reload</a></li>
<li class="menu__list-item"><a href="/docs/1.x/tools/vscode/" class="menu__link">Visual Studio Code</a></li></ul></li></ul>
            </nav>
        </div>
    </div>
</aside>

<main>
  <div class="container padding-top--md padding-bottom--lg">
    <div class="col doc-item">
        <p>An important principle of object oriented programming (OOP) is to favor a compositional approach to systems over an inheritance-based approach. In such systems, complex problems are broken down into small, single-purpose objects that collaborate with one another. However, this approach is not a panacea, and introduces its own set of challenges:</p>
<ul>
<li>How do we instantiate a set of collaborating objects, particularly when there is a complex arrangement of dependencies between the objects?</li>
<li>How do we avoid tight coupling between an object and the implementation details of its dependencies?</li>
<li>How do we manage memory and control the lifetimes of objects in such a system?</li>
<li>How does our user interface, often controlled by a different engine, gain access to our composed system capabilities?</li>
</ul>
<p>To address these challenges, FAST introduces the concept of a <em>dependency injection container</em>. A DI Container is a sub-system with the responsibilities of understanding dependency relationships, constructing objects with their dependencies, delivering dependencies to components, and managing lifetimes.</p>
<h2 id="creating-a-di-container">Creating a DI Container</h2>
<p>DI Containers can exist in a hierarchy, allowing child containers to override the dependencies of the parent, but typically there is one root container in which all the system's services are registered. In a typical FAST application, you will want this container to be associated with the <code>document.body</code> so that all UI component children can gain access to its capabilities. Here's how you would create that root container:</p>
<pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">DI</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@microsoft/fast-foundation"</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> container <span class="token operator">=</span> <span class="token constant">DI</span><span class="token punctuation">.</span><span class="token function">getOrCreateDOMContainer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>You'll want to create and configure your root container as early as possible in your application lifecycle, typically in your application's entry point module. If you are using FAST's Design System features or its components, we've integrated them with DI, so that you can configure everything with a unified API. Instead of calling <code>DI.getOrCreateDOMContainer()</code> you can simply import the Design System Provider function and use that. Here's some code that you may have seen in other parts of our documentation, that does just that:</p>
<pre class="language-ts"><code class="language-ts"><span class="token function">provideFASTDesignSystem</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span>
        <span class="token function">fastButton</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>The <code>register</code> method of the <code>DesignSystem</code> actually delegates directly to the DI container. As a result, you can register your Web Components and all your application dependencies in the same place, following the same patterns.</p>
<h3 id="example-scenario">Example Scenario</h3>
<p>Once you have a container, you can use it to register and retrieve system dependencies. This is best demonstrated with a typical scenario. Imagine that we have a <code>NewAccountScreen</code> web component in our app. Users navigate to this screen to create a new account. This screen is dependent on an <code>AccountService</code>, which is able to create accounts and login new users. The <code>AccountService</code> itself is dependent on a <code>UserSession</code> and an <code>HTTPClient</code>. The <code>HTTPClient</code> is dependent on a <code>ServiceBaseURL</code> string. Let's set this up, working from the inside out.</p>
<h2 id="creating-di-keys">Creating DI Keys</h2>
<p>The FAST DI can handle any kind of dependency, including primitive values like strings. Simply register a <code>ServiceBaseURL</code> with the container and any HTTP service that needs it can simply request it by key. This allows for a centralized configuration, making it easy to swap out in different environments. Here's how you define a strongly typed <em>key</em> that symbolizes an interface to a dependency.</p>
<pre class="language-ts"><code class="language-ts"><span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token constant">DI</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@microsoft/fast-foundation"</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> ServiceBaseURL <span class="token operator">=</span> <span class="token constant">DI</span><span class="token punctuation">.</span><span class="token generic-function"><span class="token function">createInterface</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h2 id="registering-dependencies">Registering Dependencies</h2>
<p>Once an interface key is defined, you'll want to register a concrete value with the root container. That can be done like so:</p>
<pre class="language-ts"><code class="language-ts">container<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span>
    Registration<span class="token punctuation">.</span><span class="token function">instance</span><span class="token punctuation">(</span>ServiceBaseURL<span class="token punctuation">,</span> <span class="token string">"https://www.fast.design/"</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>Or through the design system like this:</p>
<pre class="language-ts"><code class="language-ts"><span class="token function">provideFASTDesignSystem</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span>
        Registration<span class="token punctuation">.</span><span class="token function">instance</span><span class="token punctuation">(</span>ServiceBaseURL<span class="token punctuation">,</span> <span class="token string">"https://www.fast.design/"</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>The container (and the Design System) has a <code>register</code> method that takes a variable number of <code>Registry</code> instances. The <code>Registration</code> object is a helper for creating registrations with various behaviors. Here is a summary of what's available on the <code>Registration</code> object:</p>
<ul>
<li><code>instance</code> - Configures an existing object instance. Every request with the key will return this exact instance.</li>
<li><code>singleton</code> - Configures a class that is instantiated when the Key is first requested. All successive requests with the same key will return the cached instance.</li>
<li><code>transient</code> - Configures a class that is instantiated for each request with the Key. This means that each requestor gets a new instance.</li>
<li><code>callback</code> - Configures a function callback. Every time the Key is requested, the callback will be run, allowing custom code to dynamically return values.</li>
<li><code>cachedCallback</code> - Configures a function callback. The first time the Key is requested, the callback will be run to return a value. Successive calls return the cached value without invoking the callback again.</li>
<li><code>aliasTo</code> - Configures a Key to act as an alias to another Key.</li>
</ul>
<div class="alert alert--secondary">
<div class="alert__heading">Note</div>
<p>Component functions like <code>fastButton()</code> actually return an instance of <code>Registry</code> that is responsible for obtaining contextual information from the DI container and using it to register the Web Component with FAST. You can follow this same pattern not only with your own components but with any configurable, shared dependency.</p></div>
<h2 id="constructor-injection">Constructor Injection</h2>
<p>The above code defines a key for the <code>ServiceBaseURL</code> and configures a value for the container, but how do we get that value to the <code>HTTPClient</code>? Since <code>HTTPClient</code> is a plain class (as opposed to a web component), we'll leverage constructor injection. To do so, we declare that our constructor is dependent on <code>ServiceBaseURL</code> as follows:</p>
<pre class="language-ts"><code class="language-ts"><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">HTTPClient</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token decorator"><span class="token at operator">@</span><span class="token function">ServiceBaseURL</span></span> serviceBaseURL<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token generic-function"><span class="token function">get</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span></span></span><span class="token punctuation">(</span>url<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>Notice that in TypeScript, we can use the key as a decorator for the constructor parameter. This tells the DI container that when it creates an instance of <code>HTTPClient</code> it should first resolve <code>ServiceBaseURL</code> since it will need to provide that as the first parameter when constructing <code>HTTPClient</code>.</p>
<h2 id="di-key-and-inject-patterns">DI Key and Inject Patterns</h2>
<p>Our <code>ServiceBaseURL</code> represented a simple string. So, how do we handle something more complex like <code>HTTPClient</code>? After all, we want that to be injected into the <code>AccountService</code>. A common pattern is to create an interface for <code>HTTPClient</code> and a key with the same name. TypeScript allows these to be named the same, which works to our advantage here.</p>
<pre class="language-ts"><code class="language-ts"><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">HTTPClient</span> <span class="token punctuation">{</span>
    <span class="token generic-function"><span class="token function">get</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span></span></span><span class="token punctuation">(</span>url<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> HTTPClient <span class="token operator">=</span> <span class="token constant">DI</span><span class="token punctuation">.</span><span class="token generic-function"><span class="token function">createInterface</span><span class="token generic class-name"><span class="token operator">&lt;</span>HTTPClient<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">DefaultHTTPClient</span> <span class="token keyword">implements</span> <span class="token class-name">HTTPClient</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token decorator"><span class="token at operator">@</span><span class="token function">ServiceBaseURL</span></span> serviceBaseURL<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token generic-function"><span class="token function">get</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span></span></span><span class="token punctuation">(</span>url<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>We could follow the same pattern for the <code>UserSession</code> as well, but let's look at a different approach. Sometimes, you may find that having the extra interface/implementation with interface key abstraction is an over-complication for your use case. You don't have to create a custom key if you just want to inject a concrete class. The <code>AccountService</code> could declare its dependencies using the generic <code>inject</code> decorator like so:</p>
<pre class="language-ts"><code class="language-ts"><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">AccountService</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span>
        <span class="token decorator"><span class="token at operator">@</span><span class="token function">HttpClient</span></span> http<span class="token operator">:</span> HttpClient<span class="token punctuation">,</span> 
        <span class="token decorator"><span class="token at operator">@</span><span class="token function">inject</span></span><span class="token punctuation">(</span>UserSession<span class="token punctuation">)</span> session<span class="token operator">:</span> UserSession
    <span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>Better yet, if you are using the <code>tsconfig.json</code> setting <code>&quot;emitDecoratorMetadata&quot;: true</code> then you can even do this:</p>
<pre class="language-ts"><code class="language-ts"><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">AccountService</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span>
        <span class="token decorator"><span class="token at operator">@</span><span class="token function">HttpClient</span></span> http<span class="token operator">:</span> HttpClient<span class="token punctuation">,</span> 
        <span class="token decorator"><span class="token at operator">@</span><span class="token function">inject</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> session<span class="token operator">:</span> UserSession
    <span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<h2 id="other-di-registration-approaches">Other DI Registration Approaches</h2>
<p>Above, we saw that <code>ServiceBaseURL</code> had to be explicitly registered with the container. Otherwise, how else would we know what string to resolve? However, explicit registration with the container is not always needed.</p>
<h3 id="auto-registration">Auto-registration</h3>
<p>In the case of <code>UserSession</code> above, the container will use <code>UserSession</code> directly as the key. However, since we have not explicitly registered <code>UserSession</code> in the container, it will attempt to use the key itself as the registration. As a result, it will instantiate <code>UserSession</code> and then register the instance. Another way of thinking of this is that auto-registered classes are treated as singletons by default.</p>
<h3 id="default-registration">Default Registration</h3>
<p>We've seen how we can explicitly register dependencies with the container and also how classes can be auto-registered. A third approach is to have the key itself define a default registration. If defined, this registration will be used if no other registration for the same key is configured with the container. We could set the <code>AccountService</code> up to work this way if we desired. Here's what that would look like:</p>
<pre class="language-ts"><code class="language-ts"><span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">AccountService</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">DefaultAccountService</span> <span class="token keyword">implements</span> <span class="token class-name">AccountService</span> <span class="token punctuation">{</span>
    <span class="token function">constructor</span><span class="token punctuation">(</span>
        <span class="token decorator"><span class="token at operator">@</span><span class="token function">HttpClient</span></span> http<span class="token operator">:</span> HttpClient<span class="token punctuation">,</span> 
        <span class="token decorator"><span class="token at operator">@</span><span class="token function">inject</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> session<span class="token operator">:</span> UserSession
    <span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> AccountService <span class="token operator">=</span> <span class="token constant">DI</span><span class="token punctuation">.</span><span class="token generic-function"><span class="token function">createInterface</span><span class="token generic class-name"><span class="token operator">&lt;</span>AccountService<span class="token operator">></span></span></span><span class="token punctuation">(</span>
    x <span class="token operator">=></span> x<span class="token punctuation">.</span><span class="token function">singleton</span><span class="token punctuation">(</span>DefaultAccountService<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<h2 id="injecting-into-web-components">Injecting into Web Components</h2>
<p>Ultimately, our <code>NewAccountScreen</code> web component needs our <code>AccountService</code>. Unfortunately, web components must have parameterless constructors. To complicate matters further, the constructor is usually called by the web browser's runtime itself while parsing HTML, so our DI container is completely blocked from the process.</p>
<p>To address this, the FAST DI supports property injection on web components. Here's how we would declare the dependency:</p>
<pre class="language-ts"><code class="language-ts"><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">NewAccountScreen</span> <span class="token keyword">extends</span> <span class="token class-name">FASTElement</span> <span class="token punctuation">{</span>
    <span class="token decorator"><span class="token at operator">@</span><span class="token function">AccountService</span></span> accountService<span class="token operator">!</span><span class="token operator">:</span> AccountService<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>With the property defined as above, the <code>accountService</code> property will be available to access from the <code>connectedCallback</code> lifecycle hook forward.</p>
<p>Alternatively, like with constructor injection, you can also use the <code>inject</code> decorator directly with concrete types. Here's what that looks like:</p>
<pre class="language-ts"><code class="language-ts"><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">NewAccountScreen</span> <span class="token keyword">extends</span> <span class="token class-name">FASTElement</span> <span class="token punctuation">{</span>
    <span class="token decorator"><span class="token at operator">@</span><span class="token function">inject</span></span><span class="token punctuation">(</span>MyService<span class="token punctuation">)</span> accountService<span class="token operator">!</span><span class="token operator">:</span> MyService<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>


    </div>
  </div>
</main>

    </div>
</div>

    </div>
    <footer class="footer footer--dark">
        <div class="container container-fluid">
            <div class="row footer__links">
                <div class="col footer__col">
                    <div class="footer__title">Docs</div>
                    <ul class="footer__items clean-list">
                        <li class="footer__item"><a class="footer__link-item" href="/docs/getting-started/quick-start">FAST Element</a></li>
                    </ul>
                </div>
                <div class="col footer__col">
                    <div class="footer__title">Community</div>
                    <ul class="footer__items clean-list">
                        <li class="footer__item"><a href="https://discord.gg/FcSNfg4" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="icon-external-link">
                                    <path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z">
                                    </path>
                                </svg></a></li>
                    </ul>
                </div>
                <div class="col footer__col">
                    <div class="footer__title">Social</div>
                    <ul class="footer__items clean-list">
                        <li class="footer__item"><a href="https://medium.com/fast-design" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="icon-external-link">
                                    <path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z">
                                    </path>
                                </svg></a></li>
                        <li class="footer__item"><a href="https://github.com/microsoft/fast" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="icon-external-link">
                                    <path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z">
                                    </path>
                                </svg></a></li>
                        <li class="footer__item"><a href="https://twitter.com/FAST_UI" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="icon-external-link">
                                    <path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z">
                                    </path>
                                </svg></a></li>
                    </ul>
                </div>
                <div class="col footer__col">
                    <div class="footer__title">Legal</div>
                    <ul class="footer__items clean-list">
                        <li class="footer__item"><a href="https://github.com/microsoft/fast/blob/main/LICENSE" target="_blank" rel="noopener noreferrer" class="footer__link-item">License<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="icon-external-link">
                                    <path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z">
                                    </path>
                                </svg></a></li>
                        <li class="footer__item"><a href="https://go.microsoft.com/fwlink/?LinkId=521839" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy &amp;
                                cookies<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="icon-external-link">
                                    <path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z">
                                    </path>
                                </svg></a></li>
                        <li class="footer__item"><a href="https://go.microsoft.com/fwlink/?LinkID=206977" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms of use<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="icon-external-link">
                                    <path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z">
                                    </path>
                                </svg></a></li>
                        <li class="footer__item"><a href="https://www.microsoft.com/trademarks" target="_blank" rel="noopener noreferrer" class="footer__link-item">Trademarks<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="icon-external-link">
                                    <path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z">
                                    </path>
                                </svg></a></li>
                    </ul>
                </div>
            </div>
            <div class="footer__bottom text--center">
                <div class="footer__copyright">Â© Microsoft 2025</div>
            </div>
        </div>
    </footer>
    <script src="/js/sidebar-navigation.js"></script>
  </body>
</html>
